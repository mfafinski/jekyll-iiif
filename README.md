# jekyll-iiif
Jekyll plugin to embed static IIIF images in jekyll pages

This is a first stab at a [Jekyll](https://jekyllrb.com/) plugin that generates static tiles and a IIIF [Image API](http://iiif.io/api/image/2.1/) ```info.json``` file for images that will be displayed in the Jekyll site. It uses [zimeon](https://github.com/zimeon/)'s ```iiif_static.py``` script (part of his [IIIF Image API Python library](https://github.com/zimeon/iiif) and incorporates the [OpenSeadragon](https://openseadragon.github.io/) viewer.

Demo: [Council of Constance](https://www.wallandbinkley.com/projects/2016/jekyll-iiif-demo/)

To use it:

- Install [Jekyll](https://jekyllrb.com/)
- Install the [IIIF Image API Python library](https://github.com/zimeon/iiif), somewhere on the same machine
- Create a Jekyll instance with ```jekyll new```
- Within that Jekyll instance:
	- Create a Gemfile if there isn't one there already, and add to it:
		```gem 'jekyll-iiif', :git => 'https://github.com/pbinkley/jekyll-iiif.git'```
	- Run ```bundle install``` to install the gem. If necessary, install ```bundler``` with ```gem install bundler```.
	- Create a directory ```_iiif``` and put source images in it (nice big high-resolution images are best, to show off what IIIF can do)
	- Edit your ```_config.yaml``` to provide the full path to the ```iiif_static.py``` script, with a line like:

		```iiif_static: /full/path/to/iiif_static.py```

	- Edit the Jekyll css to add a section like this, so that your OpenSeadragon viewer will have width and height (otherwise it will be invisible):

		```
		#openseadragon1 {
			width: 100%;
			height: 500px;
		}
		```

	- create a Markdown page such as ```iiif.md```, containing a yaml header  and a call to the ```iiif``` plugin, like this:

		```
		---
		title: jekyll-iiif demo
		---

		{% iiif imagename %}
		```

		(Using the base name, without file extension, of one of the images you put in the ```_iiif``` directory) 

	- render and serve the site with ```jekyll s```. You should see the output of the ```iiif_static.py``` script as it generates the tiles, something like:

	```
	      Generating... 
		. / 00cover/0,0,512,512/512,/0/default.jpg
		. / 00cover/0,512,512,512/512,/0/default.jpg
		. / 00cover/0,1024,512,512/512,/0/default.jpg
		. / 00cover/0,1536,512,512/512,/0/default.jpg
		. / 00cover/0,2048,512,512/512,/0/default.jpg
		...
	```

	- visit the page at [http://127.0.0.1:4000/iiif.html](http://127.0.0.1:4000/iiif.html). You should see your image displayed by OpenSeadragon in a deeply-zoomable tiled IIIF display

Instead of specifying the image name in the iiif call, you can put in the page yaml header as "iiif_image: imagename" (again without the filename extension), and invoke it with ```{% iiif %}```. 

A page can include more than one IIIF image.

This implementation is absolutely bare-bones. Possible improvements:

- tie the generating plugin into a [Collection](https://jekyllrb.com/docs/collections/), so that pages could be autogenerated for every image, a page of thumbnails could be generated, etc.
- rewrite ```iiif_static.py``` in Ruby so it could be packaged with the plugins in a gem